System.register(["./chunk-frameworks.js","./chunk-vendor.js"],function(I,$){"use strict";var p,b,q,k,S,j,L,E,T,c,d,A;return{setters:[function(r){p=r.o,b=r.aS,q=r.x,k=r.V,S=r.A,j=r.aU,L=r.aV,E=r.aW,T=r.r},function(r){c=r.a,d=r.o,A=r.r}],execute:function(){var r=Object.defineProperty,a=(e,t)=>r(e,"name",{value:t,configurable:!0});function v(e){const t=e.querySelector(".js-gist-files"),s=document.getElementById("js-gist-file-template"),n=document.createElement("div");n.innerHTML=s.textContent;for(const i of n.querySelectorAll("[id]"))i.id!=="blob-dragged-file-input"&&i.removeAttribute("id");const o=n.querySelector(".js-code-textarea");o!=null&&o.setAttribute("id",`blob_contents_${Date.now()}`);for(const i of n.children)t.append(i);return t.lastElementChild}a(v,"createEmptyFile");function x(e){for(const t of e.querySelectorAll(".js-gist-file")){const s=t.querySelector(".js-gist-filename"),n=t.querySelector(".js-blob-contents");if(!s.value&&!n.value)return t}return v(e)}a(x,"withEmptyFile");function g(e){return b(e.closest(".js-code-editor"))}a(g,"withEditor");async function m(e){const t=e.getAttribute("data-language-detection-url");if(!t)return;const s=new URL(t,window.location.origin),n=new URLSearchParams(s.search.slice(1));n.append("filename",e.value),s.search=n.toString();const o=await fetch(s.toString(),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!o.ok){const u=new Error,f=o.statusText?` ${o.statusText}`:"";throw u.message=`HTTP ${o.status}${f}`,u}const l=await o.json();(await g(e)).setMode(l.language)}a(m,"onFilenameChange"),p(".js-gist-filename",async e=>{const t=e,s=e.closest(".js-code-editor");await g(s),q(t,m),e.addEventListener("blur",()=>k(t,m),{once:!0})}),c("click",".js-add-gist-file",function(e){e.preventDefault();const t=e.currentTarget.closest(".js-blob-form");v(t).scrollIntoView()}),c("gist:filedrop",".js-blob-form",async function(e){const{file:t,data:s}=e.detail,n=x(e.currentTarget),o=n.querySelector(".js-gist-filename");o.value=t.name,m(o),(await g(o)).setCode(s),n.scrollIntoView()}),c("click",".js-remove-gist-file",function(e){e.preventDefault();const t=e.currentTarget.closest(".js-gist-file");for(const s of t.querySelectorAll(".js-gist-deleted input"))s.disabled=!1;t.querySelector(".js-code-editor").remove()});function y(e){const t=e.querySelectorAll(".js-remove-gist-file");for(const s of t)s.classList.toggle("d-none",t.length<2)}a(y,"updateRemoveButtonVisibility"),d(".js-remove-gist-file",function(e){const t=e.closest(".js-gist-files");return{add(){y(t)},remove(){y(t)}}});var D=Object.defineProperty,h=(e,t)=>D(e,"name",{value:t,configurable:!0});p(".js-quicksearch-field",_),S(".js-quicksearch-field",C),c("navigation:keydown",".js-quicksearch-results",F),c("submit",".js-quicksearch-form",R),c("focusout:delay",".js-quicksearch-field",function(e){const s=e.currentTarget.closest("form").querySelector(".js-quicksearch-results");s&&(s.classList.remove("active"),j(s))});function _(e){L(e.form.querySelector(".js-quicksearch-results"))}h(_,"bindQuickSearchEvents");function R(e){const t=e.currentTarget.querySelector(".js-quicksearch-results");t&&(t.classList.remove("active"),j(t))}h(R,"teardown");function F(e){const t=e,s=t.target,n=s.closest("form");if(t.detail.hotkey==="Escape"){const o=n.querySelector(".js-quicksearch-results");o.classList.remove("active"),E(o)}else t.detail.hotkey==="Enter"&&!s.classList.contains("js-navigation-item")&&(T(n),t.preventDefault())}h(F,"onNavigationKeyDown");let w=null;async function C(e){const t=e.target,s=t.value.replace(/^\s+|\s+$/g,""),n=t.closest("form"),o=n.querySelector(".js-quicksearch-results"),l=o.getAttribute("data-quicksearch-url");let i="";w==null||w.abort();const{signal:u}=w=new AbortController;if(s.length){const f=new URL(l,window.location.origin),P=new URLSearchParams(f.search.slice(1));P.append("q",s),f.search=P.toString(),n.classList.add("is-sending");try{const U=await fetch(f.toString(),{signal:u});U.ok&&(i=await U.text())}catch{}}u.aborted||(i&&(o.innerHTML=i),o.classList.toggle("active",s!==""),n.classList.remove("is-sending"))}h(C,"fetchResults"),A(".js-gist-file-update-container .js-comment-update",async function(e,t){let s;try{s=await t.json()}catch{return}if(e.action=s.json.url,s.json.authenticity_token){const n=e.querySelector("input[name=authenticity_token]");n.value=s.json.authenticity_token}}),d(".js-gist-comment-permalink",function(e){const t=e.getAttribute("data-href");e.innerHTML=window.location.origin+t}),d(".js-gist-dropzone",()=>{$.import("./chunk-drag-drop.js")})}}});
//# sourceMappingURL=gist-e4bea752.js.map
